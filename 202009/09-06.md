## 2020-09-06
## 什么是Base64

### 1.什么是Base64

Base64是一种**基于64个可打印字符来表示二进制数据的编码方式**，是从二进制数据到字符的过程。
原则上，计算机中所有内容都是二进制形式存储的，所以所有内容（包括文本、影音、图片等）都可以用base64来表示。

### 2.Base64编码原理

Base64编码之所以称为Base64，是因为其使用64个字符来对任意数据进行编码，同理有Base32、Base16编码。标准Base64编码使用的64个字符为：

![https://camo.githubusercontent.com/94bdcace2d7573bc32bac0e3b11530d2b7ce9e4991d2ad757665b6057da7f911/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3231342f3434312f323134343431343931362d356134386133353134616561315f61727469636c6578](https://camo.githubusercontent.com/94bdcace2d7573bc32bac0e3b11530d2b7ce9e4991d2ad757665b6057da7f911/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3231342f3434312f323134343431343931362d356134386133353134616561315f61727469636c6578)

有点特殊的是最后两个字符，因对最后两个字符的选择不同，Base64编码又有很多变种，比如用于编码URL的Base64 URL编码。

Base64编码本质上是一种将二进制数据转成文本数据的方案。对于非二进制数据，是先将其转换成二进制形式，然后每连续6比特（2的6次方=64）计算其十进制值，根据该值在上面的索引表中找到对应的字符，最终得到一个文本字符串。

假设我们要对 Hello! 进行Base64编码，按照ASCII表，其转换过程如下图所示：

![https://camo.githubusercontent.com/296b93a21d29d1b6b2443eacf1aecab18e0b3b76c8adb3e6aa0467e41c2b01dc/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3131312f3539362f313131353936303735362d356134386134306461333861315f61727469636c6578](https://camo.githubusercontent.com/296b93a21d29d1b6b2443eacf1aecab18e0b3b76c8adb3e6aa0467e41c2b01dc/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3131312f3539362f313131353936303735362d356134386134306461333861315f61727469636c6578)

可知 Hello! 的Base64编码结果为 SGVsbG8h，每3个原始字符经Base64编码成4个字符。那么，当原始字符串长度不能被3整除时，怎么办呢？



以 Hello!! 为例，其转换过程为：

![https://camo.githubusercontent.com/4dc51b93b0f5eacda66c1fc52566e3cf221a4463b70eca95b158bf72cf2f454b/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3236382f3635382f323638363538373838362d356134386135346336336365655f61727469636c6578](https://camo.githubusercontent.com/4dc51b93b0f5eacda66c1fc52566e3cf221a4463b70eca95b158bf72cf2f454b/68747470733a2f2f696d6167652d7374617469632e7365676d656e746661756c742e636f6d2f3236382f3635382f323638363538373838362d356134386135346336336365655f61727469636c6578)

Hello!! Base64编码的结果为 SGVsbG8hIQAA。可见，不能被3整除时会采用来来补0的方式来完成编码。

>需要注意的是：标准Base64编码通常用 = 字符来替换最后的 A，即编码结果为 SGVsbG8hIQ==。因为 = 字符并不在Base64编码索引表中，其意义在于结束符号，在Base64解码时遇到 = 时即可知道一个Base64编码字符串结束。

### 3.Base64编码应用

就前端而言，对于一些简单的图片，为了减少外部资源加载，降低页面加载时间，可以采用base64将图片编码成字符串，直接内嵌到页面中。这种内嵌方式的实现，得益于大部分浏览器对Data URI scheme特性的支持，该特性通常会在CSS设置背景图片时用到，其格式为：
```css
background:url(data:文件类型;编码方式,编码后的文件内容);
```
也可通过img标签嵌入图片：
```html
<img alt="base64 image" src="data:文件类型;编码方式,编码后的文件内容" />
```
下面说下具体使用方法（以icon图标为例）：

- 下载或制作所需图标；
- 使用base64在线编码工具，将图标编码成字符串；
- 将得到的字符串复制到你的前端代码中使用（例如background:url(字符串)）

### 4.适用场景
一般适用于比较小、色彩层次单一的图片（如icon图标），不要试图用于色彩丰富的较大图片，尽管能够实现展现，但由于编码后的字符串非常大，会明显增大HTML/CSS文件的大小，影响加载速度。

本文学习网上资料整理而来，仅供个人学习使用，部分内容仅代表个人理解及思考。

主要参考：
http://blog.xiayf.cn/2016/01/24/base64-encoding/
https://blog.csdn.net/zdy0_2004/article/details/50370107

原文链接：https://segmentfault.com/a/1190000012654771


Base64编码的思想是是采用64个基本的ASCII码字符对数据进行重新编码。它将需要编码的数据拆分成字节数组。以3个字节为一组。按顺序排列24位数据，再把这24位数据分成4组，即每组6位。再在每组的的最高位前补两个0凑足一个字节。这样就把一个3字节为一组的数据重新编码成了4个字节。当所要编码的数据的字节数不是3的整倍数，也就是说在分组时最后一组不够3个字节。这时在最后一组填充1到2个0字节。并在最后编码完成后在结尾添加1到2个"="。（ 注BASE64字符表：ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/）

从以上编码规则可以得知，通过Base64编码，原来的3个字节编码后将成为4个字节，即字节增加了33.3%，数据量相应变大。所以20M的数据通过Base64编码后大小大概为20M*133.3%=26.67M。
————————————————
版权声明：本文为CSDN博主「sallay」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/sallay/article/details/3550740

https://www.zhihu.com/question/31155574